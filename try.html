<!DOCTYPE html>
<html>
<head>
<title>Alarm Clock</title>
</head>
<body>
	<script>
const speechRecognition=window.webkitSpeechRecognition //Google Chrome 
||
window.SpeechRecognition;  //Firefox

function startListening()
{
    const recong = new speechRecognition();
    recong.start();

    recong.onresult =function(data)
    {
        handleResults(data);
    }
}
function handleResults(data)
{
    let text=data.results[0][0].transcript;
    text = text.toLowerCase();
    console.log(text);

    ProcessCommand(text);
}
function ProcessCommand(UserText)
{
        if(UserText.includes("search on google"))
        {
            UserText=UserText.slice(16);
            Speak('Searching initiated...'+UserText);
            searchOnGoogle(UserText);
        }
        else if(UserText.includes("hey jarvis"))
        {
            UserText=UserText.slice(10);
            Speak('Searching initiated...'+UserText);
            searchOnGoogle(UserText);
        }
        else if(UserText.includes("search on youtube"))
        {
            UserText=UserText.slice(17);
            Speak('Searching initiated...'+UserText);
            searchOnYoutube(UserText);
        }
        else
        {

        }
}
function Speak(TEXT)
{
    const utter = new SpeechSynthesisUtterance();

    utter.text = TEXT;

    window.speechSynthesis.speak(utter);
}
startListening();
</script>
<input id="alarmTime" type="datetime-local">
<button id="alarmButton" onclick="setAlarm(this);">Set Alarm</button>
<div id="alarmOptions" style="display: none;">
<button onclick="snooze();">Snooze 5 minutes</button>
<button onclick="stopAlarm();">Stop Alarm</button>
</div>
<script type="text/javascript">
		
		var alarmSound = new Audio();
		alarmSound.src = 'alarm.mp3';
		var alarmTimer;

		function setAlarm(button) {
			var ms = document.getElementById('alarmTime').valueAsNumber;
			if(isNaN(ms)) {
				alert('Invalid Date');
				return;
			}

			var alarm = new Date(ms);
			var alarmTime = new Date(alarm.getUTCFullYear(), alarm.getUTCMonth(), alarm.getUTCDate(),  alarm.getUTCHours(), alarm.getUTCMinutes(), alarm.getUTCSeconds());
			var differenceInMs = alarmTime.getTime() - (new Date()).getTime();

			if(differenceInMs < 0) {
				alert('Specified time is already passed');
				return;
			}

			alarmTimer = setTimeout(initAlarm, differenceInMs);
			button.innerText = 'Cancel Alarm';
			button.setAttribute('onclick', 'cancelAlarm(this);');
		};

		function cancelAlarm(button) {
			clearTimeout(alarmTimer);
			button.innerText = 'Set Alarm';
			button.setAttribute('onclick', 'setAlarm(this);')
		};

		function initAlarm() {
			Speak("wake up sir...");
			alarmSound.play();
			document.getElementById('alarmOptions').style.display = '';
		};

		function stopAlarm() {
			alarmSound.pause();
			alarmSound.currentTime = 0;
			document.getElementById('alarmOptions').style.display = 'none';
			cancelAlarm(document.getElementById('alarmButton'));
		};

		function snooze() {
			stopAlarm();
			alarmTimer = setTimeout(initAlarm, 300000); // 5 * 60 * 1000 = 5 Minutes
		};

	</script>
</body>
</html>